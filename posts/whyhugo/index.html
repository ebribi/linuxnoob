<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Why Hugo (and a little shell script to make deploying easier...) | Linux Noob</title>
    <link rel="stylesheet" href="/linuxnoob/css/style.css" />
    <link rel="stylesheet" href="/linuxnoob/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/linuxnoob/">Home</a></li>
      
      <li><a href="/linuxnoob/about/">About</a></li>
      
      <li><a href="/linuxnoob/posts/">Posts</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Why Hugo (and a little shell script to make deploying easier&hellip;)</span></h1>

<h2 class="date">October 4, 2025</h2>
</div>

<main>
<p>I wanted a fast, simple way to get this blog up and running. I also wanted to learn how I can host a site on GitHub since I 1) knew it was possible and 2) had never gotten the chance to do it.</p>
<h2 id="hugo-vs-jekyll-and-github-pages">Hugo vs. Jekyll and GitHub Pages</h2>
<p>From what I read, Jeykll is the native, go-to option for hosting static sites on GitHub Pages. I opted for Hugo instead because it would be less automated and force me to get familiar with using git locally.</p>
<p>I created 2 repositories in my GitHub: <a href="https://github.com/ebribi/linux-blog">one</a> to store my source code, and <a href="https://github.com/ebribi/linuxnoob">the other</a> to deploy the site.</p>
<h3 id="lesson-1---you-only-get-1-githubio">Lesson #1 - You only get 1 .github.io</h3>
<p>And it must be your username. For me, this is <code>ebribi.github.io</code>. I restarted this project 3-4 times because I named the repository <code>linuxnoob.github.io</code> thinking that I could <code>.github.io</code> to my heart&rsquo;s desire. Sadly, you can&rsquo;t. So instead, the base URL is <code>ebribi.github.io/linuxnoob</code>. Any other sites I host with GitHub Pages that isn&rsquo;t <code>ebribi.github.io</code> will have a base URL of <code>ebribi.github.io/[repo-name]</code>.</p>
<h2 id="setting-up">Setting Up</h2>
<p>I decided to use the <a href="https://xmin.yihui.org/">Xmin</a> theme. Clean, simple. Good documentation, especially in the creator&rsquo;s <a href="https://bookdown.org/yihui/blogdown/hugo.html">blogdown book</a>. I cloned the repo (<a href="https://github.com/yihui/hugo-xmin.git">https://github.com/yihui/hugo-xmin.git</a>) to my /themes folder and added <code>theme=&quot;Xmin&quot;</code> to hugo.toml. At this point, I could run hugo serve to generate the site on a localhost and make sure everything was running fine.</p>
<p><em>A more detailed step-by-step to come&hellip;</em></p>
<h2 id="extra-shell-script-for-deployment">Extra: Shell Script for Deployment</h2>
<p>Since I&rsquo;m managing 2 separate repositories for the source code and deploying the site, I tried my hand at a shell script to automate the process.</p>
<pre tabindex="0"><code>    #!/bin/bash
    
    # Exit on error
    
    set -e

    # Preserve .git folder in /public temporarily
    
    mv public/.git /tmp/public-git

    # Built site
    
    echo &#34;Building site...&#34;
    hugo --cleanDestinationDir
    
    # Restore .git
    mv /tmp/public-git
    public/.git

    # Deploy to live GitHub pages site
    
    echo &#34;Deplying to GitHub Pages...&#34;
    cd public
    git add .
    message=&#34;Rebuilt site $(date)&#34; # defualt if no commit message passed
    if [ -n &#34;$*&#34;]; then
        message=&#34;$*&#34;
    fi
    git commit -m &#34;$message&#34;
    git push origin main
    cd ..

    # Backup source to linux-blog repo
    
    echo &#34;Backing up source...&#34;
    git add .
    git commit -m &#34;$message&#34;
    git push origin main

    echo &#34;Complete.&#34;
</code></pre><p>I&rsquo;ll walk through the script line-by-line, partly to explain for the reader, mostly to check my own understanding of the code.</p>
<pre tabindex="0"><code>    #!/bin/bash
</code></pre><p>Known as a &ldquo;shebang&rdquo; in Unix, this line specifies to the operating system to use the bash shell as the default shell to run the commands that will follow in the script.</p>
<pre tabindex="0"><code>    set -e
</code></pre><p>The <code>set</code> command allows for setting or unsetting different shell options/parameters. An example of the variables that can be passed to this command is the <code>-x</code> flag (<code>xtrace</code>) for debugging. The <code>-e</code> flag (<code>errexit</code>) makes the script exit immediately if a command fails. In the context of this script, this is good to use so that any failure in pushing my changes doesn&rsquo;t result in a partial deployment.</p>
<pre tabindex="0"><code>    mv public/.git /tmp/public-git
</code></pre><p>Here, I copy the .git file from my project directory to a temporary folder. I&rsquo;ll explain further why next.</p>
<pre tabindex="0"><code>    echo &#34;Building site...&#34;
    hugo --cleanDestinationDir
</code></pre><p>After printing an update to the terminal that the site is being built, I build the site with the <code>hugo --cleanDestinationDir</code> command. Passing <code>--cleanDestinationDir</code> with this command ensures that stale content (old pages or assets like images that are no longer being used) is deleted from the <code>public/</code> directory before the new site is built.</p>
<p>However, <code>--cleanDestinationDir</code> also deletes hidden files (like <code>.git</code>). Losing <code>.git</code> means losing the remote connection to <code>linuxnoob.git</code>. This is why I copy <code>.git</code> over to /tmp/public-git before the entire <code>public/</code> directory is deleted and rebuilt.</p>
<pre tabindex="0"><code>    mv /temp/public-git
    public/.git
</code></pre><p>With the site now rebuilt in <code>public/</code>, I can move <code>.git</code> back into the <code>public/</code> directory.</p>
<pre tabindex="0"><code>    echo &#34;Deploying to GitHub pages...&#34;
    cd public
    git add .
    message=&#34;Rebuilt site $date&#34;
    if [ -n &#34;$*&#34; ]; then
        message=&#34;$*&#34;
    fi
</code></pre><p>An update message prints to signal that the site has been created successfully and that the script is now pushing the changes.</p>
<p>First, the site itself will be pushed to the <code>linuxnoob.git</code> repository that hosts <code>ebribi.github.io/linuxnoob/</code>. All changes from the current directory are staged for commit with <code>git add .</code>, including new and modified files.</p>
<p>A default message for the commit is stored in the <code>message</code> variable. The following conditional statement allows for passing a unique commit message when running the script.</p>
<p><code>$*</code> is a special bash parameter that takes all parameters passed with <code>./deploy.sh</code> in the command line and joins them together with spaces. Since the parameter is in quotes (<code>&quot;$*&quot;</code>), it produces a single string.</p>
<p>The <code>-n</code> parameter right before test that this string is non-zero, or within this use case, if a unique commit message was passed with the script. If a message was, then the commit message gets saved in the <code>message</code> variable that originally stored the default commit message.</p>
<pre tabindex="0"><code>    git commit -m &#34;$message&#34;
    git push origin main
</code></pre><p>The commit is created with the files staged with <code>git add .</code> and the message stored in <code>message</code>. The comit is pushed to the remote <code>linuxnoob.git</code> GitHub repository&rsquo;s main branch.</p>
<p>The <code>linuxnoob.git</code> repository now reflects the current state of the site, meaning the hosted site on <code>ebribi.github.io/linuxnoob/</code> is also updated. I could be done here, but I&rsquo;d like for the entire Hugo project source code to be tracked in the <code>linuxblog.git</code> repository as well.</p>
<pre tabindex="0"><code>    cd ... 
    echo &#34;Backing up source...&#34;
    git add .
    git commit -m &#34;$message&#34;
    git push origin main
    
    echo &#34;Complete.&#34;
</code></pre><p>The script moves back to the project&rsquo;s root directory, stages all changes, creates a commit with the same message as before, and pushes this to the <code>linuxblog.git</code> repository that is the remote repo for the project&rsquo;s source code.</p>
<p>Barring any errors along the way, both repositories have now been updated with the changes to the site and the source code.</p>
<p><em>More to come&hellip;</em></p>

</main>

  <footer>
  
  
  </footer>
  </body>
</html>

